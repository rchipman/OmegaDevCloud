<!DOCTYPE html>
<html>
  <head>
    <title>DevCloud Demo</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body ng-app="Site" ng-controller="MapsCtrl">
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">RacoWireless DevCloud</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="pull-right credentials" ng-show="showMap">
            <li>
              <input type="text" ng-model="credentials.customerId" placeholder="Username" />
            </li>
            <li>
              <input type="text" ng-model="credentials.webServiceKey" placeholder="Password" />
            </li>
            <li>
              <button ng-show="!enableStop" class="btn btn-primary" ng-click="connect(credentials)">Connect</button>
              <button ng-show="enableStop" class="btn btn-danger" ng-click="stopConnection()">Stop</button>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container content" ng-show="!showMap">
        <div ng-show="!connectionReady && !modelReady">
            <div class="alert alert-danger" ng-show="formAlert">
                Both Partner ID and Web Service Key are required fields.
            </div>
            <form action="">
                <div class="form-group">
                    <label for="partnerId">Partner ID*</label>
                    <input class="form-control" type="text" name="partnerId" ng-model="credentials.customerId">
                    <label for="webServiceKey">Web Service Key*</label>
                    <input class="form-control" type="text" name="webServiceKey" ng-model="credentials.webServiceKey">
                </div>
                <div class="form-group">
                    <button class="btn btn-primary pull-right" ng-click="connect(credentials)">Connect</button>
                    <button class="btn btn-danger pull-right" ng-click="clearForm()">Clear</button>
                </div>
            </form>
        </div>

        <div ng-show="connectionReady && !modelReady">
            <h3>Choose the message format you wish to use on for displaying on the map.</h3>
            <ul class="messages">
                <li ng-repeat="message in messages" ng-class="{'selected': message.selected}" ng-click="setMessageTemplate(message)">
                    {{message.data}}
                </li>
            </ul>
            <div class="mapper" ng-show="messageTemplate != null">
                <hr class="seperator">
                <h3>Select the fields that you wish to use for display purposes.</h3>
                <p class="muted">
                    Note that the latitude and longitude fields need to me actual latitude and longitude data for the map to work properly.
                </p>
                <div class="location-example">
                    <!--
                        Add map with generic marker at current locale
                        and update the display when the user makes changes to
                        the mapper object to show expected output.
                    -->
                </div>
                <ul class="message-template">
                    <li ng-repeat="(key, val) in messageTemplate">
                         <div class="row">
                             <div class="col-md-4">
                                 <label>Property</label>
                                 <div class="fake-input">
                                     {{key}}
                                 </div>
                             </div>
                             <div class="col-md-4">
                                 <label>Value</label>
                                 <div class="fake-input">
                                     {{val}}
                                 </div>
                             </div>
                             <div class="col-md-4">
                                 <label>Display Location</label>
                                 <div class="form-control">
                                     {{omegaDevCloudMappingLocation}}
                                 </div>
                                 <div>
                                     <ul>
                                         <li ng-repeat="lloc in availableLocations" ng-click="setLocation(message, loc)"></li>
                                     </ul>
                                 </div>
                                 <select class="form-control" ng-model="message.omegaDevCloudMappingLocation"  ng-options=""></select>
                             </div>
                         </div>
                    </li>
                </ul>
                <div class="btn-group">
                    <button ng-click="showMap()" class="btn btn-default" ng-class="{'btn-success': locationReady}" ng-disabled="!locationReady"></button>
                </div>
            </div>
        </div>

    </div>
    <div class="map" ng-show="showMap">
      <google-map center="map.center" zoom="map.zoom" draggable="true" pan="true" events="map.events"></google-map>
      <div class="loading" ng-show="$loading">
        <div class="spinner">
          <div class="bounce1"></div>
          <div class="bounce2"></div>
          <div class="bounce3"></div>
        </div>
      </div>
    </div>

    <!-- <script src='https://maps.googleapis.com/maps/api/js?sensor=false'></script> -->
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src='bower_components/lodash/dist/lodash.underscore.min.js'></script>
    <!-- <script src='bower_components/angular-google-maps/dist/angular-google-maps.min.js'></script> -->
    <script src="js/base64.js"></script>
    <script src="js/main.js" ></script>
  </body>
</html>
